# yapi-proxy使用说明

## 版本

- v1.0.0 初始化项目

## 使用

### 安装

可以全局安装也可以安装到项目，及成到项目中的一个命令。
> node 版本10+

**全局安装**

```bash
npm install yapi-proxy -g
```

**项目内安装**

```bash
npm install yapi-proxy -D
```

## 运行

如果你是安装在全局，则可以直接运行，后面跟上参数启动即可

```bash
# 第一个参数为为yapi项目ID 第二个参数为测试环境地址 末尾不需要“/”
yj-proxy 101 http://xxxxtest.com
```

**参数说明**

| 参数   | 说明                | 示例                            |
| ------ | ------------------- | ------------------------------- |
| catId  | Yapi对应的项目ID    | 101                 |
| apiUrl | 测试环境地址，不带/ | http://xxxxtest.com |
| port   | 启动端口，默认30080 | 8000                            |

如果安装在项目，可以使用以下命令启动服务

```bash
npx yj-proxy 101 http://xxxxtest.com
```

你也可以在项目中将以上命令配置为 npm 命令，然后跟上启动参数启动，如下

```json
"scripts": {
        "proxy": "yj-proxy"
}
```

启动成功后，然后把项目的代理地址改成 http://localhost:30088，再次启动项目即可。如果代理不了，请把代理地址换成 http://0.0.0.0:30088。

> 注意：如果是新增的项目，请在git项目中的json文件中增加该项目信息，然后提交至git，再重新启动yj-proxy项目即可。配置文件地址：[传送门]()（此分支用来维护配置文件）

